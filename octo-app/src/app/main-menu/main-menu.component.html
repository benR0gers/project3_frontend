<div class="container">
	<h1>Drunken Octopus Main Menu</h1>
	<div class="jumbotron">
		<p>Welcome {{user.firstName}} {{user.lastName}}</p>
		<button (click)="createScrumBoard()" [hidden]="!(user.role.id >= 200)"
			class="btn btn-secondary">New Scrum Board</button>
	</div>
	<div *ngIf="!boards">
		<fa name="cog" animation="spin"></fa>
	</div>
	<div class="card" *ngFor="let b of boards">
		<div class="card-body" 
			(click)="viewBoard(b)">
			<h4 class="card-title">{{b.name}}</h4>
			<div style="float: right" class="btn-group" role="group"
				aria-label="..." (click)="$event.stopPropagation();">
				<button type="button" class="btn btn-secondary"
					(click)="editScrumBoard(b); " *ngIf="(user.role.id == 200)">
					<span><i class="fa fa-pencil-square-o" aria-hidden="true"></i>
					</span>
				</button>
				<button type="button" class="btn btn-secondary"
					(click)="getAllUsers(b); ">
					<span><i class="fa fa-users" aria-hidden="true"></i>
					</span>
				</button>
				<button type="button" class="btn btn-secondary" *ngIf="(user.role.id >= 200)"
					(click)="modal1.show()"> 
					<span><i class="fa fa-trash" aria-hidden="true"></i>						
					</span>
				</button>
								
			</div>
		</div>
		<app-modal #modal1>
			<div class="app-modal-header">
				Delete {{b.name}}
			</div>
			<div class="app-modal-body">
				<p>Are you sure you want to delete this board? All data on this board will be lost.</p>
			</div>
			<div class="app-modal-footer">
				<button type="button" class="btn btn-danger" (click)="modal2.show()">Yes</button>
			  	<button type="button" class="btn btn-secondary" (click)="modal1.hide()">No</button>
			</div>
		  </app-modal>
		  <app-modal #modal2>
				<div class="app-modal-header">
					
				</div>
				<div class="app-modal-body">
					<p>Are you suuuuuuuuuuuuper sure?</p>
				</div>
				<div class="app-modal-footer">
					<button type="button" class="btn btn-danger" (click)="deleteScrumBoard(b); modal2.hide(); modal1.hide()">Yes</button>
					  <button type="button" class="btn btn-secondary" (click)="modal2.hide(); modal1.hide()">No</button>
				</div>
			  </app-modal>
		<div class="card-body" style="cursor: pointer"
			(click)="viewBoard(b)">
			<div class="progress">
				<div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar" aria-valuenow="60"
					aria-valuemin="0" aria-valuemax="100" [style.width]="percentComplete(b)">{{percentComplete(b)}}</div>
			</div>
		</div>
	</div>
</div>